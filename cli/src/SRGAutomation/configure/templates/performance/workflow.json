{
    "title": "{{.appName}}",
    "tasks": {
        "http_request_1": {
            "name": "http_request_1",
            "description": "Issue an HTTP request to any API",
            "action": "dynatrace.automations:http-function",
            "input": {
                "url": "https://san35248.sprint.dynatracelabs.com/api/v2/events/ingest",
                "method": "POST",
                "headers": {
                    "Content-Type": "application/json",
                    "Authorization": "{{.apiToken}}"
                },
                "payload": "{\"eventType\": \"CUSTOM_INFO\",\n\"title\": \"{{ event()['srg_request_id'] }}\",\n\"properties\": {\n  \"srg_evaluation_result\":\"{{ result('trigger_srg').validation_status }}\",\n  \"additional_comment\":\"test\"\n}\n}"
            },
            "position": {
                "x": 0,
                "y": 2
            },
            "predecessors": []
        },
        "site_reliability_guardian_1": {
            "name": "site_reliability_guardian_1",
            "description": "Automation action to start a site reliability guardian validation",
            "action": "dynatrace.site.reliability.guardian:validate-guardian-action",
            "active": true,
            "input": {
                "objectId": "##OBJECT_ID##",
                "jinjaExpression": "{{ { \"to\": event()['srg_end_time'] , \"from\": event()['srg_start_time'] } }}",
                "timeframeInputType": "expression",
                "expressionFrom": "event()['srg_end_time']",
                "expressionTo": "event()['srg_start_time']"
            },
            "position": {
                "x": 0,
                "y": 1
            },
            "predecessors": []
        }
    },
    "isPrivate": false,
    "eventTrigger": {
        "isActive": true,
        "trigger_configuration": {
            "type": "event",
            "value": {
                "query": "event.type == \"CUSTOM_INFO\" AND event.name == \"SRG Evaluation Request\" AND srg_app_id==\"simplenode-gitlab\""
            }
        }
    }
}